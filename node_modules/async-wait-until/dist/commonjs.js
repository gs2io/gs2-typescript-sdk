"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e extends Error{constructor(t){super(null!=t?`Timed out after waiting for ${t} ms`:"Timed out"),Object.setPrototypeOf(this,e.prototype)}}const t=(e,t)=>new Promise(((o,r)=>{try{e.schedule(o,t)}catch(e){r(e)}})),o={schedule:(e,t)=>{let o;const r=e=>{null!=e&&clearTimeout(e),o=void 0};return o=setTimeout((()=>{r(o),e()}),t),{cancel:()=>r(o)}}},r=Number.POSITIVE_INFINITY,n=(n,s,l)=>{var u,c;const i=null!==(u="number"==typeof s?s:null==s?void 0:s.timeout)&&void 0!==u?u:5e3,T=null!==(c="number"==typeof s?l:null==s?void 0:s.intervalBetweenAttempts)&&void 0!==c?c:50;let a=!1;const m=()=>new Promise(((e,r)=>{const s=()=>{a||new Promise(((e,t)=>{try{e(n())}catch(e){t(e)}})).then((n=>{n?e(n):t(o,T).then(s).catch(r)})).catch(r)};s()})),p=i!==r?()=>t(o,i).then((()=>{throw a=!0,new e(i)})):void 0;return null!=p?Promise.race([m(),p()]):m()};exports.DEFAULT_INTERVAL_BETWEEN_ATTEMPTS_IN_MS=50,exports.DEFAULT_TIMEOUT_IN_MS=5e3,exports.TimeoutError=e,exports.WAIT_FOREVER=r,exports.default=n,exports.waitUntil=n;//# sourceMappingURL=commonjs.js.map
