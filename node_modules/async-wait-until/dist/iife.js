var asyncWaitUntil=function(e){"use strict";class t extends Error{constructor(e){super(null!=e?`Timed out after waiting for ${e} ms`:"Timed out"),Object.setPrototypeOf(this,t.prototype)}}const r=(e,t)=>new Promise(((r,n)=>{try{e.schedule(r,t)}catch(e){n(e)}})),n={schedule:(e,t)=>{let r;const n=e=>{null!=e&&clearTimeout(e),r=void 0};return r=setTimeout((()=>{n(r),e()}),t),{cancel:()=>n(r)}}},o=Number.POSITIVE_INFINITY,u=(e,u,c)=>{var i,l;const s=null!==(i="number"==typeof u?u:null==u?void 0:u.timeout)&&void 0!==i?i:5e3,a=null!==(l="number"==typeof u?c:null==u?void 0:u.intervalBetweenAttempts)&&void 0!==l?l:50;let T=!1;const m=()=>new Promise(((t,o)=>{const u=()=>{T||new Promise(((t,r)=>{try{t(e())}catch(e){r(e)}})).then((e=>{e?t(e):r(n,a).then(u).catch(o)})).catch(o)};u()})),d=s!==o?()=>r(n,s).then((()=>{throw T=!0,new t(s)})):void 0;return null!=d?Promise.race([m(),d()]):m()};return e.DEFAULT_INTERVAL_BETWEEN_ATTEMPTS_IN_MS=50,e.DEFAULT_TIMEOUT_IN_MS=5e3,e.TimeoutError=t,e.WAIT_FOREVER=o,e.default=u,e.waitUntil=u,Object.defineProperty(e,"__esModule",{value:!0}),e}({});//# sourceMappingURL=iife.js.map
