define(["exports"],(function(e){"use strict";class t extends Error{constructor(e){super(null!=e?`Timed out after waiting for ${e} ms`:"Timed out"),Object.setPrototypeOf(this,t.prototype)}}const o=(e,t)=>new Promise(((o,r)=>{try{e.schedule(o,t)}catch(e){r(e)}})),r={schedule:(e,t)=>{let o;const r=e=>{null!=e&&clearTimeout(e),o=void 0};return o=setTimeout((()=>{r(o),e()}),t),{cancel:()=>r(o)}}},n=Number.POSITIVE_INFINITY,u=(e,u,c)=>{var i,l;const s=null!==(i="number"==typeof u?u:null==u?void 0:u.timeout)&&void 0!==i?i:5e3,T=null!==(l="number"==typeof u?c:null==u?void 0:u.intervalBetweenAttempts)&&void 0!==l?l:50;let a=!1;const d=()=>new Promise(((t,n)=>{const u=()=>{a||new Promise(((t,o)=>{try{t(e())}catch(e){o(e)}})).then((e=>{e?t(e):o(r,T).then(u).catch(n)})).catch(n)};u()})),m=s!==n?()=>o(r,s).then((()=>{throw a=!0,new t(s)})):void 0;return null!=m?Promise.race([d(),m()]):d()};e.DEFAULT_INTERVAL_BETWEEN_ATTEMPTS_IN_MS=50,e.DEFAULT_TIMEOUT_IN_MS=5e3,e.TimeoutError=t,e.WAIT_FOREVER=n,e.default=u,e.waitUntil=u,Object.defineProperty(e,"__esModule",{value:!0})}));//# sourceMappingURL=amd.js.map
